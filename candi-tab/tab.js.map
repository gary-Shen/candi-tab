{"version":3,"file":"tab.js","mappings":"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","sources":["webpack://candi-tab/./src/App.js","webpack://candi-tab/./src/AppStyle.js","webpack://candi-tab/./src/const.js","webpack://candi-tab/./src/constant.js","webpack://candi-tab/./src/context/settings.context.js","webpack://candi-tab/./src/globalStyle.js","webpack://candi-tab/./src/assets/bg.png","webpack://candi-tab/./src/hooks/settings.js","webpack://candi-tab/./src/hooks/storage.js","webpack://candi-tab/./src/hooks/useSettings.js","webpack://candi-tab/./src/hooks/useStorage.js","webpack://candi-tab/./src/partials/Block/BlockStyle.js","webpack://candi-tab/./src/partials/Block/EditModal/ModalStyle.js","webpack://candi-tab/./src/partials/Block/EditModal/index.js","webpack://candi-tab/./src/partials/Block/index.js","webpack://candi-tab/./src/partials/Header/index.js","webpack://candi-tab/./src/partials/IconButton/index.js","webpack://candi-tab/./src/partials/IconText/index.js","webpack://candi-tab/./src/partials/Modal/index.js","webpack://candi-tab/./src/partials/OAuth/OAuthStyle.js","webpack://candi-tab/./src/partials/OAuth/index.js","webpack://candi-tab/./src/service/candi.js","webpack://candi-tab/./src/service/gist.js","webpack://candi-tab/./src/tab.js","webpack://candi-tab/./src/utils.js","webpack://candi-tab/./src/utils/parseGistContent.js"],"sourcesContent":["import React, { useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport GridLayout from 'react-grid-layout';\nimport classNames from 'classnames';\nimport { Octokit } from '@octokit/rest';\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\nimport { QueryClient, QueryClientProvider, useMutation, useQuery } from '@tanstack/react-query';\nimport _ from 'lodash';\nimport { set } from 'lodash/fp';\nconst queryClient = new QueryClient();\nimport { Toast, ToastContainer, Button } from 'react-bootstrap';\nimport styled from 'styled-components';\nimport BarLoader from 'react-spinners/BarLoader';\n\nimport useStorage from './hooks/useStorage';\nimport Header from './partials/Header';\nimport Block from './partials/Block';\nimport useSettings from './hooks/useSettings';\nimport SettingsContext from './context/settings.context';\nimport * as gistService from './service/gist';\nimport { FILE_NAME, GIST_DESCRIPTION } from './constant';\nimport parseGistContent from './utils/parseGistContent';\nimport EditModal from './partials/Block/EditModal';\nimport { uuid } from './utils';\nimport GlobalStyle from './globalStyle';\nimport AppStyle from './AppStyle';\n\nconst Grid = styled(GridLayout)`\n  margin: 48px 0;\n`;\n\nfunction App() {\n  const { settings, updateSettings } = useContext(SettingsContext);\n  const [editable, toggleEditable] = useState(false);\n  const [activeBlockIndex, setActiveBlockIndex] = useState('');\n  const layouts = _.chain(settings)\n    .get('links')\n    .map((item) => item.layout)\n    .value();\n  const [firstBlock, setFirstBlockData] = useState('');\n  const [fistBlockVisible, toggleFirstBlockVisible] = useState(false);\n\n  const handleLayoutChange = useCallback(\n    (layout) => {\n      if (Date.now() - window.initialTime < 1000) {\n        console.log('Should not update settings');\n        return;\n      }\n      const newLinks = settings.links.map((item, index) => {\n        return { ...item, layout: layout[index] };\n      });\n\n      const newSettings = {\n        ...settings,\n        links: newLinks,\n      };\n\n      newSettings.createdAt = new Date().getTime();\n      setTimeout(() => {\n        document.dispatchEvent(new CustomEvent('sync-upload'));\n      }, 1000);\n\n      updateSettings(newSettings);\n    },\n    [settings, updateSettings],\n  );\n\n  const handleToggleEditable = () => {\n    toggleEditable(!editable);\n  };\n\n  const handleSetActiveBlockIndex = (index) => {\n    setActiveBlockIndex(index);\n  };\n\n  const handleCreateFirstBlock = useCallback(() => {\n    toggleEditable(true);\n    toggleFirstBlockVisible(true);\n    setFirstBlockData({\n      id: uuid(),\n      title: '',\n      buttons: [],\n      layout: {\n        w: 2,\n        h: 8,\n        x: 0,\n        y: 0,\n      },\n    });\n  }, []);\n\n  const handleSaveFirstBlock = useCallback(() => {\n    updateSettings(set(`links[0]`)(firstBlock)(settings));\n  }, [updateSettings, firstBlock, settings]);\n\n  const handleBlockChange = useCallback(\n    (field) => (value) => {\n      setFirstBlockData(set(field)(value)(firstBlock));\n    },\n    [firstBlock],\n  );\n\n  if (!settings) {\n    return (\n      <div className=\"spinner\">\n        <BarLoader />\n      </div>\n    );\n  }\n\n  const links = settings.links.map((item, index) => {\n    return (\n      <div key={item.id}>\n        <div\n          data-grid={item.layout}\n          className={classNames('block-wrap', {\n            blockActive: activeBlockIndex === index,\n          })}\n        >\n          <Block\n            editable={editable}\n            settings={settings}\n            updateSettings={updateSettings}\n            block={item}\n            index={index}\n            onMenuClick={handleSetActiveBlockIndex}\n          />\n        </div>\n      </div>\n    );\n  });\n\n  return (\n    <AppStyle\n      className={classNames('main', {\n        editable,\n      })}\n    >\n      <Header onEdit={handleToggleEditable} editable={editable} />\n      {links.length ? (\n        <Grid\n          layout={layouts}\n          draggableHandle=\".card-header\"\n          isResizable={editable}\n          isDraggable={editable}\n          isDroppable={editable}\n          onLayoutChange={handleLayoutChange}\n          className=\"layout\"\n          cols={12}\n          rowHeight={4}\n          width={1200}\n          margin={[0, 0]}\n          resizeHandles={['e', 'w']}\n        >\n          {links}\n        </Grid>\n      ) : (\n        <div\n          style={{\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            height: '80vh',\n          }}\n        >\n          <Button size=\"lg\" onClick={handleCreateFirstBlock}>\n            Create first block\n          </Button>\n          <EditModal\n            data={firstBlock}\n            onChange={handleBlockChange}\n            onSave={handleSaveFirstBlock}\n            type=\"block\"\n            visible={fistBlockVisible}\n            onClose={() => toggleFirstBlockVisible(false)}\n          />\n        </div>\n      )}\n    </AppStyle>\n  );\n}\n\nfunction withOauth(Comp) {\n  return function OauthWrapper(props) {\n    const [accessToken, setAccessToken] = useStorage('accessToken');\n    const [settings, updateSettings] = useSettings();\n    const gistId = _.get(settings, `gistId`);\n\n    useEffect(() => {\n      window.initialTime = new Date().getTime();\n    }, []);\n\n    const value = useMemo(() => {\n      return {\n        updateSettings,\n        settings,\n        accessToken,\n        updateAccessToken: setAccessToken,\n      };\n    }, [updateSettings, settings, accessToken, setAccessToken]);\n\n    useEffect(() => {\n      if (accessToken) {\n        gistService.setOctokit(\n          new Octokit({\n            auth: accessToken,\n          }),\n        );\n\n        return () => {\n          gistService.destroyOctokit();\n        };\n      }\n    }, [accessToken]);\n\n    const updateMutation = useMutation(gistService.updateGist, {\n      enabled: !!gistId && !!accessToken,\n    });\n    const [successToastVisible, toggleSuccessToastVisible] = useState(false);\n    const [errorToastVisible, toggleErrorToastVisible] = useState(false);\n    useEffect(() => {\n      if (updateMutation.isSuccess) {\n        toggleSuccessToastVisible(true);\n      }\n    }, [updateMutation.isSuccess]);\n    useEffect(() => {\n      if (updateMutation.isError) {\n        toggleErrorToastVisible(true);\n      }\n    }, [updateMutation.isError]);\n\n    const queryOne = useQuery(['gist', gistId], gistService.fetchOne, {\n      enabled: !!gistId,\n      initialData: {},\n    });\n\n    const settingsContent = parseGistContent(_.get(queryOne, 'data.data'));\n    const fileName = _.chain(queryOne).get('data.data.files').keys().first().value();\n    const description = _.get(queryOne, 'data.data.description');\n\n    // 上传gist\n    const handleUploadGist = useCallback(() => {\n      if (!settings || !_.get(settings, 'gistId')) {\n        return;\n      }\n\n      if (settingsContent && settingsContent.createdAt > settings.createdAt) {\n        return;\n      }\n\n      updateMutation.mutate({\n        gist_id: _.get(settings, 'gistId'),\n        public: false,\n        description: description,\n        files: {\n          [fileName]: {\n            content: JSON.stringify(settings),\n          },\n        },\n      });\n    }, [fileName, description, settings, settingsContent, updateMutation]);\n\n    useEffect(() => {\n      if (queryOne.status === 'success' && settingsContent?.createdAt > settings?.createdAt) {\n        updateSettings(settingsContent);\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [queryOne.status, settings?.createdAt, settingsContent]);\n\n    useEffect(() => {\n      document.addEventListener('sync-upload', handleUploadGist);\n\n      return () => {\n        document.removeEventListener('sync-upload', handleUploadGist);\n      };\n    }, [handleUploadGist]);\n\n    const toastStyle = {\n      width: 'auto',\n    };\n\n    return (\n      <SettingsContext.Provider value={value}>\n        <Comp {...props} />\n        <ToastContainer\n          position=\"bottom-end-2\"\n          style={{ color: '#fff', right: 10, bottom: 10 }}\n          containerPosition=\"fixed\"\n        >\n          <Toast autohide style={toastStyle} show={updateMutation.isLoading || queryOne.isLoading}>\n            <Toast.Body>\n              <BarLoader />\n            </Toast.Body>\n          </Toast>\n          <Toast\n            autohide\n            style={toastStyle}\n            bg=\"success\"\n            delay={2000}\n            show={successToastVisible}\n            onClose={() => toggleSuccessToastVisible(false)}\n          >\n            <Toast.Body>Upload success</Toast.Body>\n          </Toast>\n          <Toast\n            autohide\n            style={toastStyle}\n            bg=\"danger\"\n            delay={5000}\n            show={errorToastVisible}\n            onClose={() => toggleErrorToastVisible(false)}\n          >\n            <Toast.Header closeButton={false}>Upload failed</Toast.Header>\n            <Toast.Body>{updateMutation.error?.message}</Toast.Body>\n          </Toast>\n        </ToastContainer>\n      </SettingsContext.Provider>\n    );\n  };\n}\n\nfunction withQuery(Component) {\n  return function QueryWrapped(props) {\n    return (\n      <QueryClientProvider client={queryClient}>\n        <GlobalStyle />\n        <Component {...props} />\n        <ReactQueryDevtools initialIsOpen={false} />\n      </QueryClientProvider>\n    );\n  };\n}\n\nexport default hot(withQuery(withOauth(App)));\n","import styled from 'styled-components';\n\nconst StyledApp = styled.section`\n  width: 1200px;\n  margin-top: 1rem;\n\n  .spinner {\n    min-height: 100vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .editBtn {\n    line-height: 100%;\n\n    button {\n      padding: 0 0.4rem;\n    }\n  }\n  .blockActive {\n    z-index: 2;\n  }\n`;\n\nexport default StyledApp;\n","export const TYPES = ['primary', 'secondary', 'success', 'danger', 'warning', 'info', 'light', 'dark'];","export const FILE_NAME = 'candi_tab_settings.json';\nexport const GIST_DESCRIPTION = 'A gist for settings syncing of candi-tab chrome extension';\nexport const UPLOAD_EVENT = 'sync-upload';\nexport const DOWNLOAD_EVENT = 'sync-download';\nexport const TYPES = ['primary', 'secondary', 'success', 'danger', 'warning', 'info', 'light', 'dark'];\n","import { createContext } from 'react';\n\nconst settings = {};\n\nexport default createContext(settings);\n","import { createGlobalStyle } from 'styled-components';\n\nimport bg from './assets/bg.png';\n\nconst GlobalStyle = createGlobalStyle`\n  body {\n    background-image: url(${bg});\n    background-repeat: repeat;\n    background-attachment: fixed;\n    background-position: initial;\n  }\n\n  #app {\n    display: flex;\n    justify-content: center;\n  }\n\n  .editable {\n    .react-grid-item > .react-resizable-handle {\n      display: block;\n    }\n  }\n\n  .react-grid-layout {\n    position: relative;\n    transition: height 200ms ease;\n  }\n  .react-grid-item {\n    transition: all 200ms ease;\n    transition-property: left, top;\n  }\n  .react-grid-item.cssTransforms {\n    transition-property: transform;\n  }\n  .react-grid-item.resizing {\n    z-index: 1;\n    will-change: width, height;\n  }\n\n  .react-grid-item.react-draggable-dragging {\n    transition: none;\n    z-index: 3;\n    will-change: transform;\n  }\n\n  .react-grid-item.react-grid-placeholder {\n    background: blue;\n    opacity: 0.2;\n    transition-duration: 100ms;\n    z-index: 2;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    -o-user-select: none;\n    user-select: none;\n  }\n\n  .react-resizable-handle-w {\n    bottom: 50%;\n    transform: translateY(50%);\n    cursor: w-resize;\n    left: 4px;\n  }\n\n  .react-resizable-handle-e {\n    bottom: 50%;\n    transform: translateY(50%);\n    right: 4px;\n    cursor: e-resize;\n  }\n\n  .react-grid-item > .react-resizable-handle {\n    display: none;\n    position: absolute;\n    width: 10px;\n    height: 100%;\n    /* bottom: 0;\n    right: 0; */\n    background: none;\n    /* background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjQ5NjYzMjg4NjQ0IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI4NDAiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNOTM4LjY2NjY2NyA5MzguNjY2NjY3IDg1My4zMzMzMzMgOTM4LjY2NjY2NyA4NTMuMzMzMzMzIDg1My4zMzMzMzMgOTM4LjY2NjY2NyA4NTMuMzMzMzMzIDkzOC42NjY2NjcgOTM4LjY2NjY2N005MzguNjY2NjY3IDc2OCA4NTMuMzMzMzMzIDc2OCA4NTMuMzMzMzMzIDY4Mi42NjY2NjcgOTM4LjY2NjY2NyA2ODIuNjY2NjY3IDkzOC42NjY2NjcgNzY4TTc2OCA5MzguNjY2NjY3IDY4Mi42NjY2NjcgOTM4LjY2NjY2NyA2ODIuNjY2NjY3IDg1My4zMzMzMzMgNzY4IDg1My4zMzMzMzMgNzY4IDkzOC42NjY2NjdNNzY4IDc2OCA2ODIuNjY2NjY3IDc2OCA2ODIuNjY2NjY3IDY4Mi42NjY2NjcgNzY4IDY4Mi42NjY2NjcgNzY4IDc2OE01OTcuMzMzMzMzIDkzOC42NjY2NjcgNTEyIDkzOC42NjY2NjcgNTEyIDg1My4zMzMzMzMgNTk3LjMzMzMzMyA4NTMuMzMzMzMzIDU5Ny4zMzMzMzMgOTM4LjY2NjY2N005MzguNjY2NjY3IDU5Ny4zMzMzMzMgODUzLjMzMzMzMyA1OTcuMzMzMzMzIDg1My4zMzMzMzMgNTEyIDkzOC42NjY2NjcgNTEyIDkzOC42NjY2NjcgNTk3LjMzMzMzM1oiIHAtaWQ9IjI4NDEiPjwvcGF0aD48L3N2Zz4='); */\n    background-position: bottom right;\n    background-repeat: no-repeat;\n    background-origin: content-box;\n    box-sizing: border-box;\n  }\n\n  /* context-menu */\n  .menu-item {\n    font-size: 14px;\n    min-height: 32px;\n  }\n`;\n\nexport default GlobalStyle;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABZ0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMDvo9WkAAADESURBVEhLlc0xEoQwDMBA/v/YlFcfYDEQcGJF/Y6232JtsbUBSLeThQFIF8oOQDqYHIB0sLN6ANLBrooBSAd7NBuAdLC+4QCkg33KByAdLCsZgHSwQe8BSAcb1w1AOti0ewDSwaoYgHShTMcApAsp20A6nG5tANLtZGEA0oWyA5AOJgcgHeysHoB0sKtiANLBHs0GIB2sbzgA6WCf8gFIB8tKBiAdbNB7ANLBxnUDkA427R6AdLAqBiBdKNMxAOlCqlr7A5PnWKbfWQbaAAAAAElFTkSuQmCC\"","import { set, get } from './storage';\n\nexport function save(settings) {\n  return set('settings', settings);\n}\n\nexport function load() {\n  return get('settings');\n}","import _ from 'lodash';\n\nconst isChrome = !!(chrome && chrome.storage);\n\nexport function get(key) {\n  return new Promise((resolve, reject) => {\n    try {\n      if (isChrome) {\n        chrome.storage.local.get((store) => {\n          resolve(_.get(store, key));\n        });\n      } else {\n        resolve(JSON.parse(localStorage.getItem(key)));\n      }\n    } catch (err) {\n      reject(err);\n    }\n  });\n}\n\nexport function set(key, payload) {\n  return new Promise((resolve, reject) => {\n    if (isChrome) {\n      chrome.storage.local.set({ [key]: payload }, () => {\n        resolve(true);\n      });\n    } else {\n      try {\n        localStorage.setItem(key, JSON.stringify(payload));\n        resolve(true);\n      } catch (err) {\n        reject(err);\n      }\n    }\n  });\n}\n","import { useCallback, useEffect, useState } from 'react';\nimport { update } from 'lodash/fp';\n\nimport { save, load } from './settings';\nimport { uuid } from '../utils';\n\nconst defaultSettings = require('../default-settings.json');\n\nconst setIds = update('links')((blocks) =>\n  blocks.map((block) => {\n    const extra = {\n      id: uuid(),\n    };\n\n    const mapLink = (link) => {\n      const withId = {\n        id: uuid(),\n      };\n\n      if (!link.id) {\n        return {\n          ...link,\n          ...withId,\n        };\n      }\n\n      return link;\n    };\n\n    if (!block.id) {\n      return {\n        ...block,\n        ...extra,\n        buttons: block.buttons.map(mapLink),\n      };\n    }\n    return {\n      ...block,\n      buttons: block.buttons.map(mapLink),\n    };\n  }),\n);\n\nexport default function useSettings() {\n  const [settings, setSettings] = useState(null);\n  // const manifest = chrome.runtime.getManifest();\n  useEffect(() => {\n    load().then((result) => {\n      const newSettings = setIds({ ...defaultSettings, ...result });\n      setSettings(newSettings);\n    });\n  }, []);\n\n  const updateSettings = useCallback((newSettings) => {\n    const _value = {\n      ...newSettings,\n    };\n\n    setSettings(() => {\n      return _value;\n    });\n    save(_value);\n  }, []);\n\n  return [settings, updateSettings];\n}\n","import { useCallback, useEffect, useState } from 'react';\n\nimport * as storage from './storage';\n\nexport default function useStorage(key) {\n  const [value, setValue] = useState();\n\n  useEffect(() => {\n    try {\n      storage.get(key).then((result) => {\n        setValue(result);\n      });\n    } catch (err) {\n      console.warn(err);\n      setValue(undefined);\n    }\n  }, [key]);\n\n  const handleUpdate = useCallback(\n    (payload) => {\n      try {\n        setValue(payload);\n        storage.set(key, payload);\n      } catch (err) {\n        console.warn(err);\n      }\n    },\n    [key],\n  );\n\n  return [value, handleUpdate];\n}\n","import styled from 'styled-components';\n\nconst StyledBlock = styled.div`\n  padding: 8px;\n\n  .card {\n    height: 100%;\n  }\n\n  .card-header {\n    display: flex;\n    justify-content: space-between;\n    user-select: none;\n    .editable & {\n      cursor: move;\n    }\n  }\n\n  .block-content {\n    display: flex;\n    flex-direction: column;\n  }\n\n  .link-btn {\n    margin-top: 0.5rem;\n\n    &:first-child {\n      margin-top: 0;\n    }\n  }\n\n  .link-group {\n    width: 100%;\n  }\n\n  .block-edit {\n    cursor: pointer;\n  }\n\n  .add-bth {\n    border: 1px dashed #ccc;\n    &:hover {\n      border: 1px dashed #ccc;\n    }\n  }\n`;\n\nexport default StyledBlock;\n","import styled from 'styled-components';\n\nconst StyledBody = styled.div`\n  .color-tab + .tab-content {\n    padding: 1rem 0;\n  }\n\n  .style-btn {\n    width: 3rem;\n  }\n\n  .move-link {\n    cursor: move !important;\n  }\n`;\n\nexport default StyledBody;\n","import React, { useCallback, useState } from 'react';\nimport classNames from 'classnames';\nimport { BiTrash } from 'react-icons/bi';\nimport upperFirst from 'lodash/upperFirst';\nimport pick from 'lodash/pick';\nimport get from 'lodash/get';\nimport update from 'lodash/fp/update';\nimport compose from 'lodash/fp/compose';\nimport fpGet from 'lodash/fp/get';\nimport { Button, Form, Tabs, Tab, ButtonGroup, Popover, InputGroup, OverlayTrigger } from 'react-bootstrap';\n\nimport { uuid } from '../../../utils';\nimport { TYPES } from '../../../const';\nimport IconText from '../../IconText';\nimport Modal from '../../../partials/Modal';\nimport StyledBody from './ModalStyle';\n\nconst StylePicker = ({ value, onChange, className, ...props }) => {\n  const handleChangeStyle = (type) => {\n    if (onChange) {\n      onChange(typeof type === 'object' ? type.target.value : type);\n    }\n  };\n\n  return (\n    <div>\n      <Tabs\n        className={classNames('color-tab', className)}\n        defaultActiveKey=\"preset\"\n        id=\"uncontrolled-tab-example\"\n        {...props}\n      >\n        <Tab eventKey=\"preset\" title=\"Built-in\">\n          <ButtonGroup className=\"me-2\" aria-label=\"Second group\">\n            {TYPES.map((type) => (\n              <Button key={type} variant={type} onClick={() => handleChangeStyle(type)} />\n            ))}\n          </ButtonGroup>\n        </Tab>\n        <Tab eventKey=\"custom\" title=\"Color\">\n          <Form.Control\n            type=\"color\"\n            defaultValue=\"#563d7c\"\n            title=\"Choose your color\"\n            value={value}\n            onChange={handleChangeStyle}\n          />\n        </Tab>\n      </Tabs>\n    </div>\n  );\n};\n\nconst LinkForm = ({ data, onChange, onClose, onSave }) => {\n  const [isMenu, toggleIsMenu] = useState(!!data.menu);\n  const handleOnChange = (field) => (e) => {\n    onChange(field)(e.target ? e.target.value : e);\n  };\n\n  const handleToggleIsMenu = () => {\n    if (!isMenu) {\n      onChange('menu')(data.url ? [{ id: uuid(), ...pick(data, ['title', 'url']) }] : []);\n      onChange('url')(undefined);\n    } else {\n      onChange('menu')(undefined);\n      onChange('url')(data.menu ? get(data.menu, [0, 'url']) : '');\n    }\n    toggleIsMenu(!isMenu);\n  };\n\n  const handleAddMenu = () => {\n    onChange('menu')(\n      compose(\n        fpGet('menu'),\n        update('menu')((items) => (items || []).concat([{ id: uuid(), title: 'untitled', url: '' }])),\n      )(data),\n    );\n  };\n\n  const handleDeleteMenu = (id) => () => {\n    onChange('menu')(\n      compose(\n        fpGet('menu'),\n        update('menu')((items) => (items || []).filter((item) => item.id !== id)),\n      )(data),\n    );\n  };\n\n  const handleSubmit = useCallback(\n    (e) => {\n      e.preventDefault();\n      onSave();\n    },\n    [onSave],\n  );\n\n  const popover = (\n    <Popover>\n      <Popover.Body>\n        <StylePicker onChange={handleOnChange('style')} value={data.style} />\n      </Popover.Body>\n    </Popover>\n  );\n\n  const buttonStyle = TYPES.includes(data.style)\n    ? {}\n    : {\n        backgroundColor: data.style,\n      };\n\n  return (\n    <Form onSubmit={handleSubmit}>\n      <Form.Group className=\"mb-3\" controlId=\"title\">\n        <Form.Label>Name</Form.Label>\n        <Form.Control\n          type=\"input\"\n          placeholder=\"Type link name here\"\n          autoFocus\n          onChange={handleOnChange('title')}\n          value={data.title}\n        />\n      </Form.Group>\n\n      <Form.Group className=\"mb-3\" controlId=\"isMenu\">\n        <Form.Check type=\"checkbox\" checked={isMenu} onChange={handleToggleIsMenu} label=\"Convert to Menu\" />\n      </Form.Group>\n\n      {!isMenu && (\n        <Form.Group className=\"mb-3\" controlId=\"url\">\n          <Form.Label>Link</Form.Label>\n          <InputGroup className=\"mb-3\">\n            <OverlayTrigger trigger=\"click\" placement=\"bottom\" overlay={popover}>\n              <Button\n                variant={TYPES.includes(data.style) ? data.style : 'light'}\n                className=\"style-btn\"\n                style={buttonStyle}\n              />\n            </OverlayTrigger>\n\n            <Form.Control\n              type=\"input\"\n              placeholder=\"Type link name here\"\n              onChange={handleOnChange('url')}\n              value={data.url}\n            />\n          </InputGroup>\n        </Form.Group>\n      )}\n\n      {isMenu && (\n        <Form.Group className=\"mb-3\" controlId=\"url\">\n          <Form.Label>Links</Form.Label>\n          {data.menu &&\n            data.menu.map((item, index) => (\n              <InputGroup className=\"mb-3\" key={item.id}>\n                {/* <Button size=\"sm\" variant=\"secondary\" className=\"move-link\">\n                  <IconText text=\"\">\n                    <DragOutlined />\n                  </IconText>\n                </Button> */}\n                <Form.Control type=\"input\" onChange={handleOnChange(`menu[${index}].title`)} value={item.title} />\n                <Form.Control type=\"input\" onChange={handleOnChange(`menu[${index}].url`)} value={item.url} />\n                <Button size=\"sm\" variant=\"danger\" onClick={handleDeleteMenu(item.id)}>\n                  <BiTrash />\n                </Button>\n              </InputGroup>\n            ))}\n          <div className=\"d-grid gap-2\">\n            <Button variant=\"primary\" onClick={handleAddMenu} size=\"sm\">\n              Add link\n            </Button>\n          </div>\n        </Form.Group>\n      )}\n      <Form.Group className=\"mb-3\" controlId=\"description\">\n        <Form.Label>Description</Form.Label>\n        <Form.Control value={data.description} onChange={handleOnChange('description')} as=\"textarea\" rows={3} />\n      </Form.Group>\n    </Form>\n  );\n};\n\nconst BlockForm = ({ data, onChange, onClose, onSave }) => {\n  const handleOnChange = (field) => (e) => {\n    onChange(field)(e.target.value);\n  };\n\n  const handleSubmit = useCallback(\n    (e) => {\n      e.preventDefault();\n      onSave();\n    },\n    [onSave],\n  );\n\n  return (\n    <Form onSubmit={handleSubmit}>\n      <Form.Group className=\"mb-3\" controlId=\"title\">\n        <Form.Label>Title</Form.Label>\n        <Form.Control\n          type=\"input\"\n          placeholder=\"Block title\"\n          autoFocus\n          onChange={handleOnChange('title')}\n          value={data.title}\n        />\n      </Form.Group>\n    </Form>\n  );\n};\n\nconst FormSet = {\n  Link: LinkForm,\n  Block: BlockForm,\n};\n\nexport default function EditModal({ data, type, onChange, ...props }) {\n  const EditForm = FormSet[upperFirst(type)];\n  return (\n    <Modal {...props} onClose={props.onClose}>\n      <Modal.Header closeButton>{data.title || 'untitled'}</Modal.Header>\n      <Modal.Body>\n        <StyledBody>\n          <EditForm data={data} onChange={onChange} onSave={props.onSave} onClose={props.onClose} />\n        </StyledBody>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"secondary\" onClick={props.onClose}>\n          Close\n        </Button>\n        <Button onClick={props.onSave}>Save</Button>\n      </Modal.Footer>\n    </Modal>\n  );\n}\n","import React, { useCallback, useEffect, useState, useRef } from 'react';\nimport { Button, Card, Dropdown, Tooltip, OverlayTrigger } from 'react-bootstrap';\nimport { BiEditAlt, BiListPlus, BiTrash, BiPlusCircle } from 'react-icons/bi';\nimport ContextMenu from 'lina-context-menu';\nimport { set, update, concat } from 'lodash/fp';\nimport _ from 'lodash';\nimport styled from 'styled-components';\n\nimport { uuid } from '../../utils';\nimport EditModal from './EditModal';\nimport Modal from '../Modal';\nimport { TYPES } from '../../const';\nimport StyledBlock from './BlockStyle';\n\nconst iconStyle = {\n  fontSize: 16,\n};\n\nfunction hexToRgb(hex) {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result\n    ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16),\n      }\n    : null;\n}\n\nfunction rgbString2Obj(rgb) {\n  const [r, g, b] = rgb.replace(/rgb|\\(\\|\\)/, '').split(' ');\n  return {\n    r: parseInt(r),\n    g: parseInt(g),\n    b: parseInt(b),\n  };\n}\n\nconst Confirm = ({ title, visible, onConfirm, onClose }) => {\n  return (\n    <Modal visible={visible} onClose={onClose}>\n      <Modal.Header closeButton>Confirm</Modal.Header>\n      <Modal.Body>\n        Are you sure to delete <strong>{title}</strong>?\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"secondary\" onClick={onClose}>\n          Cancel\n        </Button>\n        <Button variant=\"danger\" autoFocus onClick={onConfirm}>\n          Confirm\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n};\n\nconst blockStyle = {\n  blockPadding: 16,\n  linkMargin: 8,\n  blockMargin: 8,\n};\n\nexport default function Block({ block, onMenuClick, settings, updateSettings, index, editable }) {\n  const { buttons: links, title } = block;\n  const [editVisible, toggleEditVisible] = useState(false);\n  const [editType, setEditType] = useState('block');\n  const [editData, setEditData] = useState(block);\n  const [activeLinkIndex, setActiveLinkIndex] = useState(-1);\n  const [isAddition, toggleAddition] = useState(null);\n  const [confirmVisible, toggleConfirmVisible] = useState(false);\n  const [dataToDelete, setDataToDelete] = useState(null);\n\n  const blockBodyRef = useRef(null);\n  const blockHeaderRef = useRef(null);\n\n  useEffect(() => {\n    document.addEventListener('candi-add-block', handleAddBlock);\n\n    return () => {\n      document.removeEventListener('candi-add-block', handleAddBlock);\n    };\n  }, [handleAddBlock]);\n\n  /**\n   * 动态更新block尺寸\n   */\n  const updateLayout = useCallback(\n    (inputSettings) => {\n      if (!blockBodyRef.current || !blockHeaderRef.current) {\n        return;\n      }\n\n      setTimeout(() => {\n        const headerHeight = blockHeaderRef.current.offsetHeight;\n        const linkSize = blockBodyRef.current.childNodes.length;\n        const linkHeight = _.chain(blockBodyRef.current.childNodes)\n          .map((item) => {\n            return item.offsetHeight;\n          })\n          .reduce((memo, cur) => {\n            return memo + cur;\n          }, 0)\n          .value();\n\n        updateSettings(\n          update(`links[${index}]`)((blockItem) => {\n            return {\n              ...blockItem,\n              layout: {\n                ...blockItem.layout,\n                h:\n                  (linkHeight +\n                    (linkSize - 1) * blockStyle.linkMargin +\n                    blockStyle.blockPadding * 2 +\n                    blockStyle.blockMargin * 2 +\n                    headerHeight) /\n                  4,\n              },\n            };\n          })(inputSettings),\n        );\n      });\n    },\n    [index, updateSettings],\n  );\n\n  /**\n   * 编辑block\n   */\n  const handleEditBlock = () => {\n    setEditType('block');\n    toggleEditVisible(true);\n    setEditData(block);\n  };\n\n  /**\n   * 编辑Link\n   */\n  const handleEditLink = (e, _, link) => {\n    setEditType('link');\n    toggleEditVisible(true);\n    setEditData(link);\n  };\n\n  /**\n   * 编辑表单\n   */\n  const handleOnChange = (field) => (value) => {\n    setEditData(set(field)(value)(editData));\n  };\n\n  /**\n   * 保存表单\n   */\n  const handleSave = () => {\n    let newSettings = _.cloneDeep(settings);\n    if (isAddition) {\n      if (editType === 'link') {\n        newSettings.links[index].buttons.splice(activeLinkIndex + 1, 0, editData);\n      } else {\n        newSettings = update('links')((blocks) => concat(blocks || [])([editData]))(newSettings);\n      }\n    } else {\n      if (editType === 'link') {\n        newSettings = set(`links[${index}].buttons[${activeLinkIndex}]`)(editData)(newSettings);\n      } else {\n        newSettings = set(`links[${index}]`)(editData)(newSettings);\n      }\n    }\n\n    newSettings.createdAt = new Date().getTime();\n    updateSettings(newSettings);\n    toggleEditVisible(false);\n    toggleAddition(false);\n    setTimeout(() => {\n      document.dispatchEvent(new CustomEvent('sync-upload'));\n    }, 1000);\n    updateLayout(newSettings);\n  };\n\n  /**\n   * 添加block\n   */\n  const handleAddBlock = useCallback(() => {\n    toggleAddition(true);\n    setEditData({\n      id: uuid(),\n      title: '',\n      buttons: [],\n      layout: {\n        w: 2,\n        h: 8,\n        x: block.layout.x,\n        y: 0,\n      },\n    });\n    toggleEditVisible(true);\n    setEditType('block');\n  }, [block.layout.x]);\n\n  /**\n   * 删除block\n   */\n  const handleDelete = () => {\n    const isBlock = dataToDelete && typeof dataToDelete.url === 'undefined';\n    const isLink = !isBlock || dataToDelete.menu;\n    let path = '';\n\n    if (isLink) {\n      path = `links[${index}].buttons`;\n    } else {\n      path = 'links';\n    }\n\n    setDataToDelete(null);\n    const newSettings = update(path)((items) => items.filter((item) => item.id !== dataToDelete.id))(settings);\n    newSettings.createdAt = new Date().getTime();\n    updateSettings(newSettings);\n    toggleConfirmVisible(false);\n    setTimeout(() => {\n      document.dispatchEvent(new CustomEvent('sync-upload'));\n    }, 1000);\n    updateLayout(newSettings);\n  };\n\n  const handleCloseConfirm = () => {\n    toggleConfirmVisible(false);\n  };\n\n  /**\n   * 添加链接\n   */\n  const handleAddLink = () => {\n    setEditType('link');\n    toggleAddition(true);\n    setEditData({\n      id: uuid(),\n      title: '',\n      url: '',\n      style: 'info',\n    });\n    toggleEditVisible(true);\n  };\n\n  /**\n   * 打开右键菜单时记录link索引\n   * @param {*} index\n   */\n  const handleLinkContextOpen = (index) => {\n    setActiveLinkIndex(index);\n  };\n\n  const blockMenu = [\n    [\n      {\n        key: 1,\n        className: 'menu-item',\n        title: 'Edit',\n        icon: <BiEditAlt style={iconStyle} />,\n        onClick: handleEditBlock,\n      },\n      {\n        key: 2,\n        className: 'menu-item',\n        title: 'Add block',\n        icon: <BiPlusCircle style={iconStyle} />,\n        onClick: handleAddBlock,\n      },\n    ],\n    [\n      {\n        key: 4,\n        className: 'menu-item',\n        title: 'Delete',\n        icon: <BiTrash style={iconStyle} />,\n        onClick: () => {\n          setDataToDelete(block);\n          toggleConfirmVisible(true);\n        },\n      },\n    ],\n  ];\n\n  const linkMenu = [\n    [\n      {\n        key: 2,\n        className: 'menu-item',\n        title: 'Edit',\n        icon: <BiEditAlt style={iconStyle} />,\n        onClick: handleEditLink,\n      },\n      {\n        key: 1,\n        className: 'menu-item',\n        title: 'Insert link after',\n        icon: <BiListPlus style={iconStyle} />,\n        onClick: handleAddLink,\n      },\n    ],\n    [\n      {\n        key: 3,\n        className: 'menu-item',\n        title: 'Delete',\n        icon: <BiTrash style={iconStyle} />,\n        onClick: (e, _, link) => {\n          setDataToDelete(link);\n          toggleConfirmVisible(true);\n        },\n      },\n    ],\n  ];\n\n  const card = (\n    <StyledBlock>\n      <Card>\n        <Card.Header className=\"card-header\" ref={blockHeaderRef}>\n          {title}\n        </Card.Header>\n        <Card.Body className=\"block-content\" ref={blockBodyRef}>\n          {links.length === 0 && editable && (\n            <Button size=\"sm\" className=\"link-btn\" onClick={handleAddLink} variant=\"light\">\n              Add link\n            </Button>\n          )}\n          {links.map((link, linkIndex) => {\n            const { title: buttonTitle, style, url, menu, id, description } = link;\n            const rgb = style && (style.startsWith('#') ? hexToRgb(style) : rgbString2Obj(style));\n            const hsp = rgb\n              ? Math.sqrt(0.299 * (rgb.r * rgb.r) + 0.587 * (rgb.g * rgb.g) + 0.114 * (rgb.b * rgb.b))\n              : 0;\n            const isDark = hsp <= 127.5;\n            const buttonStyle = TYPES.includes(style)\n              ? {}\n              : {\n                  backgroundColor: style,\n                  color: isDark ? '#fff' : '#000',\n                };\n\n            if (menu) {\n              const linkItem = (\n                <Dropdown align=\"start\" className=\"link-btn\" onClick={() => onMenuClick(index)}>\n                  <Dropdown.Toggle size=\"sm\" className=\"link-group\" variant={style}>\n                    {buttonTitle}\n                  </Dropdown.Toggle>\n\n                  <Dropdown.Menu>\n                    {menu.map(({ title: menuTitle, url: menuUrl }) => {\n                      return (\n                        <Dropdown.Item size=\"sm\" key={menuUrl} href={menuUrl}>\n                          {menuTitle}\n                        </Dropdown.Item>\n                      );\n                    })}\n                  </Dropdown.Menu>\n                </Dropdown>\n              );\n\n              return editable ? (\n                <ContextMenu\n                  // key={id}\n                  data={link}\n                  menu={linkMenu}\n                  onOpen={() => handleLinkContextOpen(linkIndex)}\n                >\n                  {linkItem}\n                </ContextMenu>\n              ) : (\n                linkItem\n              );\n            }\n\n            const button = (\n              <Button\n                as=\"a\"\n                href={url}\n                size=\"sm\"\n                date-url={url}\n                className=\"link-btn\"\n                variant={TYPES.includes(style) ? style : 'light'}\n                style={buttonStyle}\n              >\n                {buttonTitle}\n              </Button>\n            );\n\n            if (editable) {\n              return (\n                <ContextMenu\n                  // key={id}\n                  data={link}\n                  menu={linkMenu}\n                  onOpen={() => handleLinkContextOpen(linkIndex)}\n                >\n                  {button}\n                </ContextMenu>\n              );\n            }\n\n            return (\n              <OverlayTrigger\n                placement=\"top\"\n                show={typeof description === 'undefined' ? false : undefined}\n                overlay={<Tooltip>{description}</Tooltip>}\n              >\n                {button}\n              </OverlayTrigger>\n            );\n          })}\n        </Card.Body>\n      </Card>\n    </StyledBlock>\n  );\n\n  if (editable) {\n    return (\n      <>\n        <ContextMenu menu={blockMenu}>{card}</ContextMenu>\n        <EditModal\n          visible={editVisible}\n          onClose={() => toggleEditVisible(false)}\n          onChange={handleOnChange}\n          onSave={handleSave}\n          type={editType}\n          data={editData}\n        />\n        <Confirm\n          title={dataToDelete ? dataToDelete.title : ''}\n          onClose={handleCloseConfirm}\n          visible={confirmVisible}\n          onConfirm={handleDelete}\n        />\n      </>\n    );\n  }\n\n  return card;\n}\n","import React, { useState, useCallback, useContext } from 'react';\nimport styled from 'styled-components';\nimport { BiEditAlt, BiCog, BiCheck, BiSync, BiImport, BiExport } from 'react-icons/bi';\nimport '@reach/dialog/styles.css';\nimport { Menu, MenuList, MenuButton, MenuItem } from '@reach/menu-button';\nimport { Button, Form, ListGroup, Col, Row, Badge, Toast, ToastContainer, Card } from 'react-bootstrap';\nimport { omit } from 'lodash/fp';\n\nimport IconText from '../IconText';\nimport OAuth from '../OAuth';\nimport { buttonStyle } from '../IconButton';\nimport SettingsContext from '../../context/settings.context';\nimport Modal from '../Modal';\n\nconst StyledHeader = styled.div`\n  position: absolute;\n  display: flex;\n  top: 16px;\n  right: 16px;\n  z-index: 2;\n`;\n\nconst StyledMenuButton = (props) => <MenuButton {...props} css={buttonStyle} />;\n\nconst Menus = styled(MenuList)`\n  background-color: #fff;\n  padding: 8px 0;\n  border-radius: 3px;\n  box-shadow: rgb(15 15 15 / 5%) 0px 0px 0px 1px, rgb(15 15 15 / 10%) 0px 3px 6px, rgb(15 15 15 / 20%) 0px 9px 24px;\n`;\n\nconst StyledMenuItem = styled(MenuItem)`\n  cursor: pointer;\n  padding: 4px 16px;\n  transition: all 0.2s;\n  &:hover {\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n`;\n\nfunction download(url, name) {\n  const link = document.createElement('a');\n  link.setAttribute('download', name);\n  link.href = url;\n  document.body.appendChild(link);\n  link.click();\n  link.remove();\n}\n\nexport default function Header({ onEdit, editable }) {\n  const { settings, updateSettings } = useContext(SettingsContext);\n  const [oauthVisible, setOauthVisible] = useState(false);\n  const [importVisible, setImportVisible] = useState(false);\n  const [toImport, setToImport] = useState(null);\n\n  const handleOpenSyncing = () => {\n    setOauthVisible(true);\n  };\n  const handleCloseSyncing = () => {\n    setOauthVisible(false);\n  };\n\n  const handleExport = useCallback(() => {\n    download(\n      'data:application/json;charset=UTF-8,' + encodeURIComponent(JSON.stringify(settings)),\n      'candi-tab-settings.json',\n    );\n  }, [settings]);\n\n  const handleOpenImport = useCallback(() => {\n    setImportVisible(true);\n  }, []);\n\n  const handleFileOnload = useCallback((e) => {\n    const { files } = e.target;\n    if (files.length) {\n      const file = files.item(0);\n      const reader = new FileReader();\n      reader.readAsText(file);\n      reader.onload = () => {\n        let toImport;\n        try {\n          toImport = JSON.parse(reader.result);\n        } catch (e) {\n          // return window.alert(file.name + \" doesn't seem to be a valid JSON file.\");\n        }\n\n        setToImport(toImport);\n      };\n    }\n  }, []);\n\n  const handleSaveImport = useCallback(() => {\n    updateSettings({\n      ...omit(['gistId'])(toImport),\n      gistId: settings.gistId,\n      createdAt: Date.now(),\n    });\n    setImportVisible(false);\n  }, [updateSettings, toImport, settings]);\n\n  return (\n    <>\n      <StyledHeader>\n        <Menu>\n          <StyledMenuButton onClick={onEdit}>{editable ? <BiCheck /> : <BiEditAlt />}</StyledMenuButton>\n        </Menu>\n        <Menu>\n          <StyledMenuButton>\n            <BiCog />\n          </StyledMenuButton>\n          <Menus>\n            <StyledMenuItem onSelect={handleOpenSyncing}>\n              <IconText text=\"Syncing\">\n                <BiSync />\n              </IconText>\n            </StyledMenuItem>\n            <StyledMenuItem onSelect={handleOpenImport}>\n              <IconText text=\"Import\">\n                <BiImport />\n              </IconText>\n            </StyledMenuItem>\n            <StyledMenuItem onSelect={handleExport}>\n              <IconText text=\"Export\">\n                <BiExport />\n              </IconText>\n            </StyledMenuItem>\n          </Menus>\n        </Menu>\n      </StyledHeader>\n      {oauthVisible && <OAuth visible={oauthVisible} onClose={handleCloseSyncing} />}\n      <Modal visible={importVisible} onClose={() => setImportVisible(false)}>\n        <Form>\n          <Modal.Header>Import setting file</Modal.Header>\n          <Modal.Body>\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Setting file</Form.Label>\n              <Form.Control type=\"file\" onChange={handleFileOnload} />\n            </Form.Group>\n          </Modal.Body>\n          <Modal.Footer>\n            <Form.Group>\n              <Button variant=\"primary\" onClick={handleSaveImport}>\n                Yes\n              </Button>\n            </Form.Group>\n          </Modal.Footer>\n        </Form>\n      </Modal>\n    </>\n  );\n}\n","import styled, { css } from 'styled-components';\n\nexport const buttonStyle = css`\n  box-sizing: content-box;\n  border: 0;\n  display: flex;\n  margin: 4px;\n  padding: 6px;\n  align-items: center;\n  justify-content: center;\n  font-size: 24px;\n  color: #666;\n  width: 24px;\n  height: 24px;\n  cursor: pointer;\n  transition: all .2s;\n  border-radius: 3px;\n  background-color: transparent;\n  &:hover {\n    background-color: rgba(0, 0, 0, 0.1);\n    color: #333;\n  }\n`;\n\nconst IconButton = styled.button(buttonStyle);\n\nexport default IconButton;","import React from 'react';\nimport styled from 'styled-components';\n\nconst Wrap = styled.span`\n  display: flex;\n  align-items: center;\n`;\n\nconst Text = styled.span`\n  margin-left: 0.5rem;\n`;\n\nconst Icon = styled.span`\n  display: flex;\n  font-size: 18px;\n`;\n\nexport default function IconText({ children, className, text, ...props }) {\n  return (\n    <Wrap className={className} {...props}>\n      <Icon>{children}</Icon>\n      {text && <Text>{text}</Text>}\n    </Wrap>\n  );\n}\n","import React from 'react';\nimport styled, { createGlobalStyle } from 'styled-components';\nimport { BiX } from 'react-icons/bi';\nimport { Dialog } from '@reach/dialog';\n\nimport '@reach/dialog/styles.css';\n\nimport IconButton from '../IconButton';\n\nconst GlobalStyle = createGlobalStyle`\n  [data-reach-dialog-overlay] {\n    z-index: 2;\n  }\n`;\n\nconst StyledModal = styled(Dialog)`\n  position: relative;\n  border-radius: 3px;\n  box-shadow: rgb(15 15 15 / 5%) 0px 0px 0px 1px, rgb(15 15 15 / 10%) 0px 3px 6px, rgb(15 15 15 / 20%) 0px 9px 24px;\n`;\n\nconst CloseButton = styled(IconButton)`\n  position: absolute;\n  z-index: 9;\n  top: 16px;\n  right: 16px;\n`;\n\nexport default function Modal({ visible, onClose, children }) {\n  return (\n    <StyledModal isOpen={visible} onDismiss={onClose}>\n      <CloseButton onClick={onClose}>\n        <BiX />\n      </CloseButton>\n      {visible && children}\n      <GlobalStyle />\n    </StyledModal>\n  );\n}\n\nModal.Header = function ModalHeader({ children }) {\n  return <h3 style={{ overflowWrap: 'break-word' }}>{children}</h3>;\n};\n\nModal.Body = function ModalBody({ children, className }) {\n  return <div className={className}>{children}</div>;\n};\n\nconst StyledFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n\n  & > * {\n    margin-right: 16px;\n    &:last-child {\n      margin-right: 0;\n    }\n  }\n`;\n\nModal.Footer = function ModalFooter({ children }) {\n  return <StyledFooter>{children}</StyledFooter>;\n};\n","import styled from 'styled-components';\n\nconst StyledWrap = styled.div`\n  .oauth-modal-content {\n    padding: 16px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n  }\n\n  .oauth-form {\n    width: 100%;\n  }\n`;\n\nexport default StyledWrap;\n","import {\n  Button,\n  Form,\n  ListGroup,\n  Col,\n  Row,\n  Badge,\n  Dropdown,\n  ButtonGroup,\n  DropdownButton,\n  Card,\n  InputGroup,\n} from 'react-bootstrap';\nimport React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { set, get, map } from 'lodash/fp';\nimport styled from 'styled-components';\nimport { useQuery, useMutation, useQueryClient, QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport _ from 'lodash';\nimport BarLoader from 'react-spinners/BarLoader';\nimport { v4 as uuid4 } from 'uuid';\nimport dayjs from 'dayjs';\n\nimport Modal from '../Modal';\nimport SettingsContext from '../../context/settings.context';\nimport * as gistService from '../../service/gist';\nimport * as candiService from '../../service/candi';\nimport parseGistContent from '../../utils/parseGistContent';\nimport StyledWrap from './OAuthStyle';\n\nconst SpinnerStyle = styled.div`\n  width: 100%;\n  height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst spinner = (\n  <SpinnerStyle>\n    <BarLoader />\n  </SpinnerStyle>\n);\n\nconst uuid = uuid4();\nconst OAUTH_URL = `https://github.com/login/oauth/authorize?scope=gist&client_id=9f776027a79806fc1363&redirect_uri=https://candi-tab.vercel.app/api/github?uuid=${uuid}`;\n\nexport default function OAuth({ visible, onClose }) {\n  const { settings, updateSettings, accessToken, updateAccessToken } = useContext(SettingsContext);\n  const [tokenValue, setTokenValue] = useState(accessToken);\n  const queryClient = useQueryClient();\n\n  useEffect(() => {\n    setTokenValue(accessToken);\n  }, [accessToken]);\n\n  const handleOnChange = (e) => {\n    setTokenValue(e.target.value);\n  };\n\n  const handleSave = useCallback(() => {\n    updateAccessToken(tokenValue);\n  }, [tokenValue, updateAccessToken]);\n\n  /**\n   * 开始授权时，创建轮询，直到获取到token\n   */\n  const [isStartFetchToken, toggleStartFetchToken] = useState(false);\n  const handleOauthStart = useCallback(() => {\n    toggleStartFetchToken(true);\n  }, []);\n  // const queryToken = useQuery(['access-token', uuid], candiService.fetchToken, {\n  //   enabled: isStartFetchToken,\n  //   retry: 10,\n  //   onSuccess: (data) => {\n  //     toggleStartFetchToken(false);\n  //   },\n  // });\n\n  const createTokenNode = accessToken ? null : (\n    <Button variant=\"link\" style={{ width: '100%' }} href={OAUTH_URL} onClick={handleOauthStart} target=\"_blank\">\n      Create Access Token with github OAuth\n    </Button>\n  );\n\n  /** ========================== 选中gist ========================== */\n\n  const gistId = _.get(settings, `gistId`);\n\n  const [selectedGist, setGist] = useState(null);\n  const queryOne = useQuery(['gist', selectedGist?.id || gistId], gistService.fetchOne, {\n    initialData: settings.gist,\n    enabled: !!(selectedGist?.id || gistId) && !!accessToken,\n    initialData: null,\n  });\n\n  const handleClose = useCallback(() => {\n    onClose();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [queryOne.data, onClose, settings]);\n\n  const filename = _.chain(queryOne.data).get(`data.files`).keys().head().value();\n  const [gistsModalVisible, toggleGistsModalVisible] = useState(false);\n\n  const handleOpenGists = useCallback(() => {\n    toggleGistsModalVisible(true);\n  }, [toggleGistsModalVisible]);\n  const queryList = useQuery(['gists'], gistService.fetchAll, {\n    enabled: gistsModalVisible && !!accessToken,\n    cacheTime: 0,\n    initialData: [],\n  });\n  const handleSelectGist = useCallback((gist) => {\n    setGist(gist);\n  }, []);\n  const handleSaveGist = useCallback(() => {\n    if (queryOne.data?.data) {\n      updateSettings({\n        ...settings,\n        ...parseGistContent(queryOne.data.data),\n        gistId: selectedGist.id,\n      });\n    }\n\n    toggleGistsModalVisible(false);\n  }, [queryOne.data?.data, selectedGist?.id, settings, updateSettings]);\n\n  /** ========================== 选中gist ========================== */\n\n  /** ========================== 创建gist ========================== */\n  const createMutation = useMutation(gistService.create, {\n    onSuccess: (response) => {\n      toggleCreateGistModalVisible(false);\n      setGist(response.data);\n      updateSettings({\n        ...settings,\n        gistId: response.data.id,\n      });\n      setTimeout(() => {\n        queryClient.invalidateQueries('gist');\n      });\n    },\n    enabled: !!accessToken,\n  });\n  const [createGistModalVisible, toggleCreateGistModalVisible] = useState(false);\n  const [gistForm, setGistForm] = useState({\n    description: 'A gist for settings syncing of candi-tab chrome extension',\n    fileName: 'candi_tab_settings',\n  });\n  const handleCloseCreateModal = useCallback(() => {\n    toggleCreateGistModalVisible(false);\n  }, []);\n  const handleCreateGist = useCallback(() => {\n    toggleCreateGistModalVisible(true);\n  }, []);\n  const handleGistChange = useCallback(\n    (field) => (e) => {\n      setGistForm({\n        ...gistForm,\n        [field]: e.target.value,\n      });\n    },\n    [gistForm],\n  );\n  const handleSaveCreateGist = useCallback(() => {\n    createMutation.mutate({\n      gist: gistForm,\n      settings,\n    });\n  }, [createMutation, gistForm, settings]);\n  /** ========================== 创建gist ========================== */\n\n  const gistNode = (\n    <Form.Group className=\"mb-3\">\n      {queryOne.isFetching\n        ? spinner\n        : !_.isEmpty(queryOne.data) && (\n            <Card border=\"primary\">\n              <Card.Header>{filename}</Card.Header>\n              <Card.Body>\n                {_.get(queryOne.data, 'data.description')}\n                <br />\n                <Badge bg=\"light\" text=\"dark\">\n                  @{dayjs(_.get(queryOne.data, 'data.created_at')).format('YYYY-MM-DD HH:mm:ss')}\n                </Badge>\n              </Card.Body>\n            </Card>\n          )}\n    </Form.Group>\n  );\n\n  return (\n    <StyledWrap>\n      <Modal visible={visible} onClose={handleClose}>\n        <Modal.Header>Syncing with github gist</Modal.Header>\n        <Modal.Body className=\"oauth-modal-content\">\n          <Form\n            className=\"oauth-form\"\n            onSubmit={(e) => {\n              e.preventDefault();\n              return;\n            }}\n          >\n            <Form.Group className=\"mb-3\">{createTokenNode}</Form.Group>\n\n            <Form.Group className=\"mb-3\">\n              <Form.Control\n                type=\"input\"\n                placeholder=\"Paste Access Token here.\"\n                autoFocus\n                onBlur={handleSave}\n                onKeyDown={(e) => {\n                  if (e.which === 13) {\n                    e.preventDefault();\n                    handleSave();\n                  }\n                }}\n                onChange={handleOnChange}\n                value={tokenValue}\n              />\n            </Form.Group>\n            {accessToken && gistNode}\n            {accessToken && !queryOne.isFetching && (\n              <Form.Group className=\"mb-3\" controlId=\"url\">\n                <Row>\n                  <Col>\n                    <Button\n                      style={{ width: '100%' }}\n                      disabled={createMutation.isFetching}\n                      variant=\"primary\"\n                      onClick={handleCreateGist}\n                    >\n                      Create a new gist\n                    </Button>\n                  </Col>\n                  <Col>\n                    <Button style={{ width: '100%' }} variant=\"secondary\" onClick={handleOpenGists}>\n                      Select an existing gist.\n                    </Button>\n                  </Col>\n                </Row>\n              </Form.Group>\n            )}\n          </Form>\n        </Modal.Body>\n      </Modal>\n      <Modal visible={gistsModalVisible} onClose={() => toggleGistsModalVisible(false)}>\n        <Modal.Header>Select a gist from your gists</Modal.Header>\n        <Modal.Body>\n          {queryList.isFetching && spinner}\n          {!queryList.isFetching && (\n            <ListGroup style={{ margin: '16px 0' }}>\n              {_.chain(queryList)\n                .get('data.data')\n                .map((item) => (\n                  <ListGroup.Item\n                    style={{ cursor: 'pointer' }}\n                    key={item.id}\n                    variant={\n                      selectedGist && selectedGist.id === item.id\n                        ? 'primary'\n                        : settings.gistId === item.id\n                        ? 'info'\n                        : null\n                    }\n                    onClick={() => handleSelectGist(item)}\n                  >\n                    <div>{item.description}</div>\n                    <div\n                      className=\"file-info\"\n                      style={{\n                        display: 'flex',\n                        alignItems: 'flex-start',\n                        justifyContent: 'space-between',\n                        marginTop: 8,\n                      }}\n                    >\n                      <div style={{ flexGrow: 1, marginRight: 8 }}>\n                        <DropdownButton\n                          size=\"sm\"\n                          as={ButtonGroup}\n                          variant=\"light\"\n                          title=\"files\"\n                          onClick={(e) => {\n                            e.preventDefault();\n                            e.stopPropagation();\n                          }}\n                        >\n                          {_.chain(item.files)\n                            .keys()\n                            .map((filename) => (\n                              <Dropdown.Item style={{ cursor: 'default' }} key={filename}>\n                                {filename}\n                              </Dropdown.Item>\n                            ))\n                            .value()}\n                        </DropdownButton>\n                        {/* <Form.Select\n                          size=\"sm\"\n                          onClick={(e) => {\n                            e.preventDefault();\n                            e.stopPropagation();\n                          }}\n                        >\n                          {_.chain(item.files)\n                            .keys()\n                            .slice(0, 3)\n                            .map((filename) => <option key={filename}>{filename}</option>)\n                            .value()}\n                        </Form.Select> */}\n                      </div>\n                      <div style={{ display: 'flex', flexDirection: 'column' }}>\n                        <Badge bg=\"light\" text=\"dark\" style={{ marginBottom: 8 }}>\n                          created@{dayjs(item.created_at).format('YYYY-MM-DD HH:mm:ss')}\n                        </Badge>\n                        <Badge bg=\"light\" text=\"dark\">\n                          updated@{dayjs(item.updated_at).format('YYYY-MM-DD HH:mm:ss')}\n                        </Badge>\n                      </div>\n                    </div>\n                  </ListGroup.Item>\n                ))\n                .value()}\n            </ListGroup>\n          )}\n        </Modal.Body>\n        <Modal.Footer>\n          {!queryList.isFetching && (\n            <Button variant=\"primary\" onClick={handleSaveGist}>\n              Yes\n            </Button>\n          )}\n        </Modal.Footer>\n      </Modal>\n      <Modal visible={createGistModalVisible} onClose={handleCloseCreateModal}>\n        <Modal.Header>Create a gist</Modal.Header>\n        <Modal.Body>\n          <Form\n            className=\"gist-form\"\n            onSubmit={(e) => {\n              e.preventDefault();\n              return;\n            }}\n          >\n            <Form.Group className=\"mb-3\" controlId=\"description\">\n              <Form.Label>File name</Form.Label>\n              <InputGroup className=\"mb-3\">\n                <Form.Control\n                  autoFocus\n                  placeholder=\"file name\"\n                  aria-label=\"file name\"\n                  aria-describedby=\"fileName\"\n                  onChange={handleGistChange('fileName')}\n                  value={gistForm.fileName}\n                />\n                <InputGroup.Text id=\"fileName\">.json</InputGroup.Text>\n              </InputGroup>\n            </Form.Group>\n\n            <Form.Group className=\"mb-3\" controlId=\"description\">\n              <Form.Label>Description</Form.Label>\n              <Form.Control\n                value={gistForm.description}\n                onChange={handleGistChange('description')}\n                as=\"textarea\"\n                rows={3}\n              />\n            </Form.Group>\n          </Form>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleCloseCreateModal}>\n            Close\n          </Button>\n          <Button disabled={createMutation.isLoading} onClick={handleSaveCreateGist}>\n            {createMutation.isLoading ? 'Processing' : 'Save'}\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </StyledWrap>\n  );\n}\n","export function fetchToken({ queryKey }) {\n  const [, uuid] = queryKey;\n  return fetch('https://candi-tab.vercel.app/api/token?uuid=' + uuid);\n}\n","let octokit;\n\nexport function setOctokit(instance) {\n  octokit = instance;\n}\n\nexport function destroyOctokit() {\n  octokit = null;\n}\n\nexport function fetchAll() {\n  if (!octokit) {\n    return;\n  }\n\n  return octokit.rest.gists.list();\n}\n\nexport function fetchOne({ queryKey }) {\n  if (!octokit) {\n    return;\n  }\n\n  const [, gist_id] = queryKey;\n\n  return octokit.rest.gists.get({\n    gist_id,\n  });\n}\n\nexport function create({ gist, settings }) {\n  return octokit.rest.gists.create({\n    public: false,\n    description: gist.description,\n    files: {\n      [`${gist.fileName}.json`]: {\n        content: JSON.stringify(settings),\n      },\n    },\n  });\n}\n\nexport function updateGist(payload) {\n  if (!octokit) {\n    return;\n  }\n\n  return octokit.rest.gists.update(payload);\n}\n","import React from 'react';\nimport { createRoot } from 'react-dom/client';\n\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nconst mountNode = document.getElementById('app');\nconst root = createRoot(mountNode);\nroot.render(<App />);\n","export function uuid () {\n  return `_${Math.random().toString(36).substr(2, 9)}`;\n}","import _ from 'lodash';\n\nexport default function (data) {\n  const fileName = _.chain(data).get('files').keys().first().value();\n  const content = _.get(data, ['files', fileName, 'content']);\n  let result;\n  try {\n    result = JSON.parse(content);\n  } catch (err) {\n    console.warn(err);\n  }\n\n  return result;\n}\n"],"names":["queryClient","QueryClient","Grid","styled","GridLayout","App","useContext","SettingsContext","settings","updateSettings","useState","editable","toggleEditable","activeBlockIndex","setActiveBlockIndex","layouts","_","get","map","item","layout","value","firstBlock","setFirstBlockData","fistBlockVisible","toggleFirstBlockVisible","handleLayoutChange","useCallback","Date","now","window","initialTime","console","log","newLinks","links","index","newSettings","createdAt","getTime","setTimeout","document","dispatchEvent","CustomEvent","handleSetActiveBlockIndex","handleCreateFirstBlock","id","uuid","title","buttons","w","h","x","y","handleSaveFirstBlock","set","handleBlockChange","field","className","key","classNames","blockActive","block","onMenuClick","onEdit","length","draggableHandle","isResizable","isDraggable","isDroppable","onLayoutChange","cols","rowHeight","width","margin","resizeHandles","style","display","alignItems","justifyContent","height","size","onClick","data","onChange","onSave","type","visible","onClose","withOauth","Comp","props","useStorage","accessToken","setAccessToken","useSettings","gistId","useEffect","useMemo","updateAccessToken","gistService","Octokit","auth","updateMutation","useMutation","enabled","successToastVisible","toggleSuccessToastVisible","errorToastVisible","toggleErrorToastVisible","isSuccess","isError","queryOne","useQuery","initialData","settingsContent","parseGistContent","fileName","keys","first","description","handleUploadGist","mutate","gist_id","public","files","content","JSON","stringify","status","addEventListener","removeEventListener","toastStyle","position","color","right","bottom","containerPosition","autohide","show","isLoading","bg","delay","closeButton","error","message","withQuery","Component","QueryClientProvider","client","initialIsOpen","hot","StyledApp","TYPES","FILE_NAME","GIST_DESCRIPTION","UPLOAD_EVENT","DOWNLOAD_EVENT","createContext","GlobalStyle","createGlobalStyle","save","load","isChrome","chrome","storage","Promise","resolve","reject","local","store","parse","localStorage","getItem","err","payload","setItem","defaultSettings","require","setIds","update","blocks","extra","mapLink","link","withId","setSettings","then","result","_value","setValue","warn","undefined","StyledBlock","StyledBody","StylePicker","handleChangeStyle","target","defaultActiveKey","eventKey","variant","defaultValue","LinkForm","menu","isMenu","toggleIsMenu","handleOnChange","e","handleSubmit","preventDefault","popover","buttonStyle","backgroundColor","onSubmit","controlId","placeholder","autoFocus","checked","url","pick","label","trigger","placement","overlay","compose","fpGet","items","filter","concat","as","rows","BlockForm","FormSet","Link","Block","EditModal","EditForm","upperFirst","iconStyle","fontSize","hexToRgb","hex","exec","r","parseInt","g","b","rgbString2Obj","rgb","replace","split","Confirm","onConfirm","blockStyle","blockPadding","linkMargin","blockMargin","editVisible","toggleEditVisible","editType","setEditType","editData","setEditData","activeLinkIndex","setActiveLinkIndex","isAddition","toggleAddition","confirmVisible","toggleConfirmVisible","dataToDelete","setDataToDelete","blockBodyRef","useRef","blockHeaderRef","handleAddBlock","updateLayout","inputSettings","current","headerHeight","offsetHeight","linkSize","childNodes","linkHeight","reduce","memo","cur","blockItem","handleAddLink","handleLinkContextOpen","blockMenu","icon","linkMenu","card","ref","linkIndex","buttonTitle","startsWith","isDark","Math","sqrt","linkItem","align","menuTitle","menuUrl","href","onOpen","button","splice","path","StyledHeader","StyledMenuButton","Menus","MenuList","StyledMenuItem","MenuItem","download","name","createElement","setAttribute","body","appendChild","click","remove","Header","oauthVisible","setOauthVisible","importVisible","setImportVisible","toImport","setToImport","handleExport","encodeURIComponent","handleOpenImport","handleFileOnload","file","reader","FileReader","readAsText","onload","handleSaveImport","omit","onSelect","text","css","IconButton","Wrap","Text","Icon","IconText","children","StyledModal","Dialog","CloseButton","Modal","isOpen","onDismiss","overflowWrap","Body","StyledFooter","Footer","StyledWrap","SpinnerStyle","spinner","uuid4","OAUTH_URL","OAuth","tokenValue","setTokenValue","useQueryClient","handleSave","toggleStartFetchToken","handleOauthStart","createTokenNode","selectedGist","setGist","gist","handleClose","filename","head","gistsModalVisible","toggleGistsModalVisible","handleOpenGists","queryList","cacheTime","handleSelectGist","handleSaveGist","createMutation","onSuccess","response","toggleCreateGistModalVisible","invalidateQueries","createGistModalVisible","gistForm","setGistForm","handleCloseCreateModal","handleCreateGist","handleGistChange","handleSaveCreateGist","gistNode","isFetching","border","dayjs","format","onBlur","onKeyDown","which","disabled","cursor","marginTop","flexGrow","marginRight","ButtonGroup","stopPropagation","flexDirection","marginBottom","created_at","updated_at","queryKey","fetch","fetchToken","octokit","setOctokit","instance","destroyOctokit","fetchAll","rest","gists","list","fetchOne","create","updateGist","mountNode","getElementById","root","createRoot","render","random","toString","substr"],"sourceRoot":""}